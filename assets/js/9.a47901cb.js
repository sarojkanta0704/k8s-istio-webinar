(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{309:function(s,t,e){s.exports=e.p+"assets/img/istio.a24267ed.svg"},390:function(s,t,e){"use strict";e.r(t);var a=e(25),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"istio-installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#istio-installation"}},[s._v("#")]),s._v(" Istio - Installation")]),s._v(" "),a("p",[s._v("Istio architecture:")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/istio/istio.io/7bf371365e4a16a9a13c0e79355fe1eac7f8f99f/content/docs/concepts/what-is-istio/arch.svg?sanitize=true",alt:"Istio Architecture",title:"Istio Architecture"}})]),s._v(" "),a("h2",{attrs:{id:"install-istio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-istio"}},[s._v("#")]),s._v(" Install Istio")]),s._v(" "),a("p",[s._v("Either download Istio directly from "),a("a",{attrs:{href:"https://github.com/istio/istio/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/istio/istio/releases"),a("OutboundLink")],1),s._v("\nor get the latest version by using curl:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ISTIO_VERSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.1.0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -d tmp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tmp\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tmp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://git.io/getLatestIstio "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Downloading istio-1.1.0 from https://github.com/istio/istio/releases/download/1.1.0/istio-1.1.0-linux.tar.gz "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("614")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("614")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("884")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" --:--:-- --:--:-- --:--:--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("883")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(".0M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(".0M    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  5252k      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00:02  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00:02 --:--:-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(".4M\nDownloaded into istio-1.1.0:\nLICENSE  README.md  bin  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  istio.VERSION  samples  tools\nAdd /mnt/k8s-istio-webinar/k8s-istio-webinar/tmp/istio-1.1.0/bin to your path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" e.g copy "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("paste")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your shell and/or ~/.profile:\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(':/mnt/k8s-istio-webinar/k8s-istio-webinar/tmp/istio-1.1.0/bin"')]),s._v("\n")])])]),a("p",[s._v("Change the directory to the Istio installation files location:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" istio*\n")])])]),a("p",[s._v("Install "),a("code",[s._v("istioctl")]),s._v(":")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" -x /usr/local/bin/istioctl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" bin/istioctl /usr/local/bin/\n")])])]),a("p",[s._v("Install the "),a("code",[s._v("istio-init")]),s._v(" chart to bootstrap all the Istio's CRDs:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" install/kubernetes/helm/istio-init --wait "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--name istio-init --namespace istio-system --set certmanager.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])])]),a("p",[s._v("Install "),a("a",{attrs:{href:"https://istio.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Istio"),a("OutboundLink")],1),s._v(" with add-ons ("),a("a",{attrs:{href:"https://www.kiali.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kiali"),a("OutboundLink")],1),s._v(",\n"),a("a",{attrs:{href:"https://www.jaegertracing.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jaeger"),a("OutboundLink")],1),s._v(", "),a("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Grafana"),a("OutboundLink")],1),s._v(",\n"),a("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Prometheus"),a("OutboundLink")],1),s._v(", "),a("a",{attrs:{href:"https://github.com/jetstack/cert-manager",target:"_blank",rel:"noopener noreferrer"}},[s._v("cert-manager"),a("OutboundLink")],1),s._v("):")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("helm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" install/kubernetes/helm/istio --wait --name istio --namespace istio-system "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set certmanager.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set certmanager.email"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("petr.ruzicka@gmail.com "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set gateways.istio-ingressgateway.sds.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set global.k8sIngress.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set global.k8sIngress.enableHttps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set global.k8sIngress.gatewayName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ingressgateway "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set grafana.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set kiali.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set kiali.createDemoSecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set kiali.contextPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set kiali.dashboard.grafanaURL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://grafana."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${MY_DOMAIN}")]),s._v("/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set kiali.dashboard.jaegerURL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://jaeger."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${MY_DOMAIN}")]),s._v("/ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set servicegraph.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --set tracing.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])])]),a("h2",{attrs:{id:"create-dns-records"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-dns-records"}},[s._v("#")]),s._v(" Create DNS records")]),s._v(" "),a("p",[s._v("Create DNS record "),a("code",[s._v("mylabs.dev")]),s._v(" for the loadbalancer created by Istio:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOADBALANCER_HOSTNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get svc istio-ingressgateway -n istio-system -o "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.status.loadBalancer.ingress[0].hostname}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CANONICAL_HOSTED_ZONE_NAME_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws elb describe-load-balancers --query "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LoadBalancerDescriptions[?DNSName==\\'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$LOADBALANCER_HOSTNAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('].CanonicalHostedZoneNameID"')]),s._v(" --output text"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOSTED_ZONE_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws route53 list-hosted-zones --query "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostedZones[?Name==\\'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("MY_DOMAIN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('].Id"')]),s._v(" --output text"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\nenvsubst "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/files/aws_route53-dns_change.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" aws route53 change-resource-record-sets --hosted-zone-id "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HOSTED_ZONE_ID}")]),s._v(" --change-batch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///dev/stdin\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/aws-samples/eks-workshop/65b766c494a5b4f5420b2912d8373c4957163541/static/images/crystal.svg?sanitize=true",alt:"Architecture",title:"Architecture"}})]),s._v(" "),a("h2",{attrs:{id:"create-ssl-certificate-using-let-s-encrypt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-ssl-certificate-using-let-s-encrypt"}},[s._v("#")]),s._v(" Create SSL certificate using Let's Encrypt")]),s._v(" "),a("p",[s._v("Create "),a("code",[s._v("ClusterIssuer")]),s._v(" and "),a("code",[s._v("Certificate")]),s._v(" for Route53 used by cert-manager.\nIt will allow Let's encrypt to generate certificate. Route53 (DNS) method of\nrequesting certificate from Let's Encrypt must be used to create wildcard\ncertificate "),a("code",[s._v("*.mylabs.dev")]),s._v(" (details "),a("a",{attrs:{href:"https://community.letsencrypt.org/t/wildcard-certificates-via-http-01/51223",target:"_blank",rel:"noopener noreferrer"}},[s._v("here"),a("OutboundLink")],1),s._v(").")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EKS_CERT_MANAGER_ROUTE53_AWS_SECRET_ACCESS_KEY_BASE64")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$EKS_CERT_MANAGER_ROUTE53_AWS_SECRET_ACCESS_KEY")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/files/cert-manager-letsencrypt-aws-route53-clusterissuer-certificate.yaml\nenvsubst "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/files/cert-manager-letsencrypt-aws-route53-clusterissuer-certificate.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" kubectl apply -f -\n")])])]),a("p",[a("img",{attrs:{src:"https://b3n.org/wp-content/uploads/2016/09/acme_letsencrypt_dns-01-challenge.png",alt:"ACME DNS Challenge",title:"ACME DNS Challenge"}})]),s._v(" "),a("p",[s._v("("),a("a",{attrs:{href:"https://b3n.org/intranet-ssl-certificates-using-lets-encrypt-dns-01/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://b3n.org/intranet-ssl-certificates-using-lets-encrypt-dns-01/"),a("OutboundLink")],1),s._v(")")]),s._v(" "),a("p",[s._v("Let "),a("code",[s._v("istio-ingressgateway")]),s._v(" to use cert-manager generated certificate via\n"),a("a",{attrs:{href:"https://www.envoyproxy.io/docs/envoy/v1.5.0/intro/arch_overview/service_discovery#arch-overview-service-discovery-types-sds",target:"_blank",rel:"noopener noreferrer"}},[s._v("SDS"),a("OutboundLink")],1),s._v(".\nSteps are taken from here "),a("a",{attrs:{href:"https://istio.io/docs/tasks/traffic-management/ingress/ingress-certmgr/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://istio.io/docs/tasks/traffic-management/ingress/ingress-certmgr/"),a("OutboundLink")],1),s._v(".")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl -n istio-system patch gateway istio-autogenerated-k8s-ingress "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  -p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[{"')]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("op")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("replace"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v("path"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("/spec/servers/1/tls"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v("value"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": {"')]),s._v("credentialName"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("ingress-cert-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${LETSENCRYPT_ENVIRONMENT}")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v("mode"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("SIMPLE"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v("privateKey"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("sds"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('", "')]),s._v("serverCertificate"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('": "')]),s._v("sds"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"}}]"')]),s._v("\n")])])]),a("h2",{attrs:{id:"check-and-configure-istio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-and-configure-istio"}},[s._v("#")]),s._v(" Check and configure Istio")]),s._v(" "),a("p",[s._v("Allow the "),a("code",[s._v("default")]),s._v(" namespace to use Istio injection:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl label namespace default istio-injection"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("enabled\n")])])]),a("p",[s._v("Check namespaces:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl get namespace -L istio-injection\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("NAME           STATUS   AGE   ISTIO-INJECTION\ndefault        Active   19m   enabled\nistio-system   Active   7m\nkube-public    Active   19m\nkube-system    Active   19m\n")])])]),a("p",[s._v("See the Istio components:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("kubectl get --namespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("istio-system svc,deployment,pods,job,horizontalpodautoscaler,destinationrule\n")])])]),a("p",[s._v("Output:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("NAME                             TYPE           CLUSTER-IP       EXTERNAL-IP                                                                  PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                                                                                                                                      AGE\nservice/grafana                  ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".84.93     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("/TCP                                                                                                                                     7m\nservice/istio-citadel            ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".203.5     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8060")]),s._v("/TCP,15014/TCP                                                                                                                           7m\nservice/istio-galley             ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".224.231   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP,15014/TCP,9901/TCP                                                                                                                   7m\nservice/istio-ingressgateway     LoadBalancer   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".241.162   abd0be556520611e9ac0602dc9c152bf-2144127322.eu-central-1.elb.amazonaws.com   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":31380/TCP,443:31390/TCP,31400:31400/TCP,15029:31705/TCP,15030:30101/TCP,15031:30032/TCP,15032:32493/TCP,15443:31895/TCP,15020:31909/TCP   7m\nservice/istio-pilot              ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".68.4      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15010")]),s._v("/TCP,15011/TCP,8080/TCP,15014/TCP                                                                                                       7m\nservice/istio-policy             ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".24.13     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9091")]),s._v("/TCP,15004/TCP,15014/TCP                                                                                                                 7m\nservice/istio-sidecar-injector   ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".252.24    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP                                                                                                                                      7m\nservice/istio-telemetry          ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".103.164   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9091")]),s._v("/TCP,15004/TCP,15014/TCP,42422/TCP                                                                                                       7m\nservice/jaeger-agent             ClusterIP      None             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5775")]),s._v("/UDP,6831/UDP,6832/UDP                                                                                                                   7m\nservice/jaeger-collector         ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".32.192    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14267")]),s._v("/TCP,14268/TCP                                                                                                                          7m\nservice/jaeger-query             ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".196.113   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16686")]),s._v("/TCP                                                                                                                                    7m\nservice/kiali                    ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".66.131    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20001")]),s._v("/TCP                                                                                                                                    7m\nservice/prometheus               ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".246.253   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9090")]),s._v("/TCP                                                                                                                                     7m\nservice/servicegraph             ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".163.157   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v("/TCP                                                                                                                                     7m\nservice/tracing                  ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".90.197    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP                                                                                                                                       7m\nservice/zipkin                   ClusterIP      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.100")]),s._v(".8.55      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                                                                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9411")]),s._v("/TCP                                                                                                                                     7m\n\nNAME                                           DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\ndeployment.extensions/certmanager              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/grafana                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-citadel            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-galley             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-ingressgateway     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-pilot              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-policy             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-sidecar-injector   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-telemetry          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/istio-tracing            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/kiali                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/prometheus               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\ndeployment.extensions/servicegraph             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           7m\n\nNAME                                          READY   STATUS      RESTARTS   AGE\npod/certmanager-7478689867-6n8r7              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/grafana-7b46bf6b7c-w7ms2                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-citadel-75fdb679db-v8bqh            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-galley-c864b5c86-8xfpm              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-ingressgateway-6cb65d86cb-5ptgp     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-init-crd-10-stcw2                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-init-crd-11-fgdh9                   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-init-crd-certmanager-10-rhmv9       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-init-crd-certmanager-11-dv24d       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Completed   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-pilot-f4c98cfbf-pwp45               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-policy-6cbbd844dd-4dzbx             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("          7m\npod/istio-sidecar-injector-7b47cb4689-5x7ph   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/istio-telemetry-ccc4df498-w77hk           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("          7m\npod/istio-tracing-75dd89b8b4-frg8w            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/kiali-7787748c7d-lb454                    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/prometheus-89bc5668c-54pdj                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          7m\npod/servicegraph-5d4b49848-cscbp              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          7m\n\nNAME                                      DESIRED   SUCCESSFUL   AGE\njob.batch/istio-init-crd-10               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            7m\njob.batch/istio-init-crd-11               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            7m\njob.batch/istio-init-crd-certmanager-10   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            7m\njob.batch/istio-init-crd-certmanager-11   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            7m\n\nNAME                                                       REFERENCE                         TARGETS         MINPODS   MAXPODS   REPLICAS   AGE\nhorizontalpodautoscaler.autoscaling/istio-ingressgateway   Deployment/istio-ingressgateway   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unknown"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/80%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          7m\nhorizontalpodautoscaler.autoscaling/istio-pilot            Deployment/istio-pilot            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unknown"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/80%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          7m\nhorizontalpodautoscaler.autoscaling/istio-policy           Deployment/istio-policy           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unknown"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/80%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          7m\nhorizontalpodautoscaler.autoscaling/istio-telemetry        Deployment/istio-telemetry        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unknown"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/80%   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("          7m\n\nNAME                                                  HOST                                             AGE\ndestinationrule.networking.istio.io/istio-policy      istio-policy.istio-system.svc.cluster.local      7m\ndestinationrule.networking.istio.io/istio-telemetry   istio-telemetry.istio-system.svc.cluster.local   7m\n")])])]),a("p",[s._v("Configure the Istio services ("),a("a",{attrs:{href:"https://www.jaegertracing.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jaeger"),a("OutboundLink")],1),s._v(",\n"),a("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Prometheus"),a("OutboundLink")],1),s._v(", "),a("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Grafana"),a("OutboundLink")],1),s._v(",\n"),a("a",{attrs:{href:"https://www.kiali.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kiali"),a("OutboundLink")],1),s._v(", Servicegraph) to be visible externally:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("envsubst "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/files/export_services_gateway.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" kubectl apply -f -\n")])])]),a("p",[a("img",{attrs:{src:e(309),alt:"Istio",title:"Istio"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);